const translations = {
    "es": {
        "navInicio": "Inicio",
        "navSobreMi": "Sobre mí",
        "navCertificaciones": "Certificaciones",
        "navProyectos": "Proyectos",
        "navContacto": "Contacto",
        "heroTitle": "Hola, soy <span class='highlight-text-grayscale'>Juan Torres</span>",
        "heroLead": "Software Developer especializado en construir soluciones eficientes y escalables.",
        "btnDownload": "Descargar CV <i class='bi bi-download'></i>",
        "aboutTitle": "Sobre mí",
        "aboutText": "Hola, soy Juan Ramon, un orgulloso salvadoreño con una pasión desbordante por crear experiencias digitales que fusionan creatividad y tecnología. Desde El Salvador, me dedico a dar vida a proyectos web utilizando herramientas como .NET Core, MySQL, HTML, CSS y JavaScript. Mi enfoque está en crear interfaces intuitivas y atractivas, que no solo sean funcionales, sino también visualmente impactantes.",
        "value1Title": "Arquitectura Limpia",
        "value1Desc": "Código escalable, organizado y fácil de mantener.",
        "value2Title": "UX/UI Centrado",
        "value2Desc": "Diseños que priorizan la experiencia del usuario final.",
        "value3Title": "Mejora Continua",
        "value3Desc": "Constante aprendizaje de nuevas tecnologías y stacks.",
        "devSkillsTitle": "Habilidades de Programación",
        "html5Title": "HTML5",
        "html5Description": "Arquitectura semántica.",
        "css3Title": "CSS3",
        "css3Description": "Estilos y Layouts.",
        "jsTitle": "JavaScript",
        "jsDescription": "Comportamiento dinámico.",
        "bootstrapTitle": "Bootstrap",
        "bootstrapDescription": "Framework CSS.",
        "cardDotnetTitle": ".NET",
        "cardDotnetText": "Backend robusto y escalable.",
        "softSkillsTitle": "Habilidades Blandas",
        "softSkillDisciplineTitle": "Disciplina",
        "softSkillDisciplineText": "Constancia en el aprendizaje y proyectos profesionales.",
        "softSkillCuriosityTitle": "Curiosidad",
        "softSkillCuriosityText": "Interés natural por aprender y profundizar en lo técnico.",
        "softSkillPerseveranceTitle": "Perseverancia",
        "softSkillPerseveranceText": "Enfoque en metas hasta lograr resultados concretos.",
        "softSkillSelfCriticismTitle": "Autocrítica",
        "softSkillSelfCriticismText": "Capacidad de mejora continua sobre puntos débiles.",
        "softSkillCommunicationTitle": "Comunicación",
        "softSkillCommunicationText": "Transmisión clara y eficaz de ideas técnicas.",
        "certificationsTitle": "Certificaciones",
        "techInterestsTitle": "Intereses Tecnológicos",
        "interestIATitle": "Inteligencia Artificial",
        "interestIADesc": "Fascinado por el aprendizaje automático y su impacto transformador.",
        "interestFullstackTitle": "Desarrollo Fullstack",
        "interestFullstackDesc": "Construcción de soluciones web completas de extremo a extremo.",
        "interestCyberTitle": "Ciberseguridad",
        "interestCyberDesc": "Importancia de la protección de datos en entornos digitales.",
        "interestVRARTitle": "Realidad Extendida",
        "interestVRARDesc": "Inmersión y experiencias de usuario de próxima generación.",
        "projectsTitle": "Portfolio de Proyectos",
        "project1Title": "Calculadora Contable",
        "project1Description": "Sistema integral de gestión financiera y contable con cálculos automatizados en tiempo real.",
        "project1Status": "Finalizado",
        "project2Title": "Huerto en Mano",
        "project2Description": "Ecosistema digital para la gestión de huertos urbanos con integración de datos.",
        "project2Status": "En Desarrollo",
        "project3Title": "Sistema Farmacia",
        "project3Description": "Solución empresarial para la automatización de inventarios y ventas.",
        "project3Status": "Finalizado",
        "viewProjectBtn": "<i class='fab fa-github me-1'></i> Repositorio",
        "testimonialsSectionTitle": "Reconocimiento Profesional",
        "testimonial1Role": "Lead Front-end Developer",
        "testimonial1Text": "Su curiosidad técnica y <strong>perseverancia</strong> son excepcionales.",
        "testimonial2Role": "Senior Back-end Engineer",
        "testimonial2Text": "Destaca por su <strong>disciplina</strong> y capacidad de autocrítica.",
        "testimonial3Role": "UX/UI Design Lead",
        "testimonial3Text": "La <strong>comunicación</strong> técnica es fluida y efectiva.",
        "testimonial4Role": "Senior QA Analyst",
        "testimonial4Text": "Atención al detalle y enfoque en la optimización de calidad.",
        "footerSocialTitle": "Conectemos",
        "footerSocialDesc": "¿Tienes una idea? Trabajemos juntos para hacerla realidad.",
        "statExp": "Años Exp.",
        "statProjects": "Proyectos",
        "statCerts": "Certificados",
        "statPassion": "Pasión",
        "footerText": "© 2025 Juan Ramón Torres Guzmán. Desarrollado con pasión y código limpio."
    },
    "en": {
        "navInicio": "Home",
        "navSobreMi": "About Me",
        "navCertificaciones": "Certifications",
        "navProyectos": "Projects",
        "navContacto": "Contact",
        "heroTitle": "Hi, I'm <span class='highlight-text-grayscale'>Juan Torres</span>",
        "heroLead": "Software Developer specialized in building efficient and scalable solutions.",
        "btnDownload": "Download CV <i class='bi bi-download'></i>",
        "aboutTitle": "About Me",
        "aboutText": "Hello, I am Juan Ramon, a proud Salvadoran with an overflowing passion for creating digital experiences that blend creativity and technology. From El Salvador, I dedicate myself to bringing web projects to life using tools like .NET Core, MySQL, HTML, CSS, and JavaScript. My focus is on creating intuitive and engaging interfaces that are not only functional but also visually striking.",
        "value1Title": "Clean Architecture",
        "value1Desc": "Scalable, organized, and easy-to-maintain code.",
        "value2Title": "HCD Focused",
        "value2Desc": "Designs that prioritize the final user experience.",
        "value3Title": "Continuous Growth",
        "value3Desc": "Constant learning of new technologies and stacks.",
        "devSkillsTitle": "Tech Stack",
        "html5Title": "HTML5",
        "html5Description": "Semantic architecture.",
        "css3Title": "CSS3",
        "css3Description": "Styles and Layouts.",
        "jsTitle": "JavaScript",
        "jsDescription": "Dynamic behavior.",
        "bootstrapTitle": "Bootstrap",
        "bootstrapDescription": "CSS Framework.",
        "cardDotnetTitle": ".NET",
        "cardDotnetText": "Robust and scalable backend.",
        "softSkillsTitle": "Soft Skills",
        "softSkillDisciplineTitle": "Discipline",
        "softSkillDisciplineText": "Consistency in learning and professional projects.",
        "softSkillCuriosityTitle": "Curiosity",
        "softSkillCuriosityText": "Natural interest in learning and technical depth.",
        "softSkillPerseveranceTitle": "Perseverance",
        "softSkillPerseveranceText": "Goal-oriented focus until achieving results.",
        "softSkillSelfCriticismTitle": "Self-criticism",
        "softSkillSelfCriticismText": "Capacity for continuous improvement on weak points.",
        "softSkillCommunicationTitle": "Communication",
        "softSkillCommunicationText": "Clear and effective technical ideas transmission.",
        "certificationsTitle": "Certifications",
        "techInterestsTitle": "Tech Interests",
        "interestIATitle": "Artificial Intelligence",
        "interestIADesc": "Fascinated by machine learning and its transformative impact.",
        "interestFullstackTitle": "Fullstack Development",
        "interestFullstackDesc": "Building complete end-to-end web solutions.",
        "interestCyberTitle": "Cybersecurity",
        "interestCyberDesc": "Importance of data protection in digital environments.",
        "interestVRARTitle": "Extended Reality",
        "interestVRARDesc": "Immersion and next-generation user experiences.",
        "projectsTitle": "Project Portfolio",
        "project1Title": "Accounting Calculator",
        "project1Description": "Financial management system with real-time automated calculations.",
        "project1Status": "Finished",
        "project2Title": "Huerto en Mano",
        "project2Description": "Digital ecosystem for urban garden management with data integration.",
        "project2Status": "In Development",
        "project3Title": "Pharmacy System",
        "project3Description": "Enterprise solution for inventory and sales automation.",
        "project3Status": "Finished",
        "viewProjectBtn": "<i class='fab fa-github me-1'></i> Repository",
        "testimonialsSectionTitle": "Professional Recognition",
        "testimonial1Role": "Lead Front-end Developer",
        "testimonial1Text": "His technical curiosity and <strong>perseverance</strong> are exceptional.",
        "testimonial2Role": "Senior Back-end Engineer",
        "testimonial2Text": "Stands out for his <strong>discipline</strong> and self-criticism ability.",
        "testimonial3Role": "UX/UI Design Lead",
        "testimonial3Text": "Technical <strong>communication</strong> is fluid and effective.",
        "testimonial4Role": "Senior QA Analyst",
        "testimonial4Text": "Attention to detail and focus on quality optimization.",
        "footerSocialTitle": "Let's Connect",
        "footerSocialDesc": "Have an idea? Let's work together to make it a reality.",
        "statExp": "Years Exp.",
        "statProjects": "Projects",
        "statCerts": "Certificates",
        "statPassion": "Passion",
        "footerText": "© 2025 Juan Ramón Torres Guzmán. Developed with passion and clean code."
    }
};

// ===== ANIMACIONES DE ENTRADA (Intersection Observer) =====
function activateAnimation() {
    const elements = document.querySelectorAll('.hidden, .card, .testimonial-item, .soft-skill-pill, .project-card');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                // Delay escalonado para elementos en grid
                setTimeout(() => {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }, index * 100);
            }
        });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    elements.forEach((el) => {
        observer.observe(el);
    });
}

// ===== TERMINAL INTERACTIVA (Innovation Factor) =====
function initTerminal() {
    const terminalInput = document.getElementById('terminal-input');
    const terminalBody = document.getElementById('terminal-body');

    if (!terminalInput || !terminalBody) return;

    const commands = {
        'help': 'Comandos disponibles: <b>about</b>, <b>skills</b>, <b>contact</b>, <b>clear</b>, <b>projects</b>',
        'about': 'Juan Torres: Software Developer enfocado en .NET y Web moderna.',
        'skills': 'C#, .NET Core, SQL Server, JavaScript, Python, Bootstrap.',
        'contact': 'Encuéntrame en <a href="https://github.com/JuanRamonTG" class="text-info">GitHub</a> o vía <a href="mailto:contato@example.com" class="text-info">Email</a>.',
        'projects': 'He desarrollado sistemas Contables, Farmacéuticos y plataformas para Huertos Urbanos.',
        'clear': 'CLEAR'
    };

    terminalInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const input = terminalInput.value.toLowerCase().trim();
            const response = commands[input] || `Comando no reconocido: '${input}'. Escribe <b>help</b> para ver opciones.`;

            if (input === 'clear') {
                terminalBody.innerHTML = '';
            } else {
                const line = document.createElement('div');
                line.className = 'terminal-line mb-2';
                line.innerHTML = `<span class="text-accent">> ${input}</span><br><span class="text-secondary">${response}</span>`;
                terminalBody.appendChild(line);
                terminalBody.scrollTop = terminalBody.scrollHeight;
            }

            terminalInput.value = '';
        }
    });

    // Auto-focus al hacer clic en el terminal
    document.querySelector('.terminal-container')?.addEventListener('click', () => {
        terminalInput.focus();
    });
}


// ===== SISTEMA DE TRADUCCIÓN POR DICCIONARIO =====
function applyAutoTranslation(lang) {
    const langData = translations[lang];

    // Recorremos las llaves del diccionario y buscamos el elemento por ID
    Object.keys(langData).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
            // Usamos innerHTML para mantener etiquetas como <span> o <i>
            element.innerHTML = langData[key];
        }
    });

    // Traducción de elementos por clase (para los botones de ver proyecto)
    const viewProjectButtons = document.querySelectorAll('.viewProjectBtn');
    viewProjectButtons.forEach(btn => {
        btn.innerHTML = langData["viewProjectBtn"];
    });

    document.documentElement.lang = lang;
}

// ===== INICIALIZACIÓN =====
document.addEventListener('DOMContentLoaded', () => {
    activateAnimation();
    initTerminal();

    const languageToggle = document.getElementById('languageToggle');
    if (languageToggle) {
        let currentLang = localStorage.getItem('lang') || 'es';

        // Aplicar idioma guardado al cargar
        if (currentLang !== 'es') {
            applyAutoTranslation(currentLang);
            languageToggle.textContent = 'EN/ES';
        }

        languageToggle.addEventListener('click', () => {
            currentLang = currentLang === 'es' ? 'en' : 'es';

            applyAutoTranslation(currentLang);
            localStorage.setItem('lang', currentLang);

            languageToggle.textContent = currentLang === 'es' ? 'ES/EN' : 'EN/ES';
        });
    }

    // Smooth Scroll
    document.querySelectorAll('.nav-link').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            if (this.hash !== "") {
                e.preventDefault();
                const target = document.querySelector(this.hash);
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
                const navbarCollapse = document.querySelector('.navbar-collapse');
                if (navbarCollapse.classList.contains('show')) {
                    bootstrap.Collapse.getInstance(navbarCollapse).hide();
                }
            }
        });
    });

    // ===== SCROLL TO TOP LOGIC =====
    const backToTopBtn = document.getElementById("btn-back-to-top");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            backToTopBtn.style.display = "block";
        } else {
            backToTopBtn.style.display = "none";
        }
    };

    backToTopBtn.addEventListener("click", () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
});
